!function(e,t,a){"use strict";function p(e){e.css("width","auto").css("height","auto"),e.css("height",e.parents(".wampum-popup-inner").height(),"max-height","100%","max-width","100%")}function n(e){e.fadeOut("fast"),"undefined"!=typeof _ouibounce&&_ouibounce.disable(),e.find(".wampum-popup-prev").hide(),e.find(".wampum-popup-next").hide()}t("body").on("click",".wampum-popup-link",function(e){e.preventDefault(),t("#wampum-popup-"+t(this).attr("data-popup")).show()}),t.each(t(".wampum-popup"),function(a,i){var s=t(this).attr("data-popup"),u=t("#wampum-popup-"+s),r=wampum_popups_vars[s].wampumpopups,o=wampum_popups_vars[s].ouibounce,l=[];for(var m in o)o.hasOwnProperty(m)&&(l[m]=o[m]);if(u.addClass("wampum-"+r.style+" wampum-"+r.type),"gallery"==r.type){var f=u.find(".wampum-popup-content");t(".gallery-item").length>1&&(f.after('<span style="display:none;" class="wampum-popup-button wampum-popup-next"><span class="screen-reader-text">Next</span></span>'),f.after('<span style="display:none;" class="wampum-popup-button wampum-popup-prev"><span class="screen-reader-text">Previous</span></span>')),t(".gallery-item").on("click","a",function(a){function n(){d.is(":visible")&&(c=d,o.attr("src",c.find("a").prop("href")).attr("alt",c.find("img").attr("alt")),d=c.prevAll(".gallery-item")?c.prevAll(".gallery-item").first():"",h=c.nextAll(".gallery-item")?c.nextAll(".gallery-item").first():"",d.length>0?l.fadeIn("fast"):l.hide(),h.length>0?m.fadeIn("fast"):m.hide())}function i(){h.is(":visible")&&(c=h,o.attr("src",c.find("a").prop("href")).attr("alt",c.find("img").attr("alt")),d=c.prevAll(".gallery-item")?c.prevAll(".gallery-item").first():"",h=c.nextAll(".gallery-item")?c.nextAll(".gallery-item").first():"",d.length>0?l.fadeIn("fast"):l.hide(),h.length>0?m.fadeIn("fast"):m.hide())}a.preventDefault();var s=t(this).prop("href"),r=t(this).find("img").attr("alt");f.find("img").remove(),f.append('<img style="width:auto;height:auto;" src="'+s+'" alt="'+r+'"/>'),u.show();var o=u.find("img"),l=u.find(".wampum-popup-prev").first(),m=u.find(".wampum-popup-next").first(),c=t(this).parents(".gallery-item"),d=c.prevAll(".gallery-item").first(),h=c.nextAll(".gallery-item").first();d.length>0?setTimeout(function(){l.fadeIn("fast")},500):l.hide(),h.length>0?setTimeout(function(){m.fadeIn("fast")},500):m.hide(),o.on("load",function(){p(o)}),t(window).resize(function(){p(o)}),l.on("click",function(){n()}),m.on("click",function(){i()}),t(e).keydown(function(e){switch(e.which){case 37:n();break;case 38:break;case 39:i();break;case 40:break;default:return}e.preventDefault()})})}if("exit"==r.type&&ouibounce(u[0],l),"timed"==r.type)if("true"==l.aggressive)u.show();else{var c=ouibounce(u[0],l);setTimeout(function(){c.fire()},r.time)}t(u).on("click",".wampum-popup-close",function(){n(u)}),r.close_outside&&t("body").mouseup(function(e){if(t(e.target).hasClass("wampum-popup-prev")||t(e.target).hasClass("wampum-popup-next"))return!1;u.find(".wampum-popup-content");t(e.target).hasClass("wampum-popup-content")||t(e.target).parents().hasClass("wampum-popup-content")||n(u)}),t(e).keydown(function(e){switch(e.which){case 27:n(u);break;default:return}e.preventDefault()})})}(this,jQuery);